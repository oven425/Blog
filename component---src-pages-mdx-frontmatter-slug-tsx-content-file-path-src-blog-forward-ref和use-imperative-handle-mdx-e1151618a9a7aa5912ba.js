"use strict";(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[280],{3817:function(n,a,s){s.r(a),s.d(a,{Head:function(){return r},default:function(){return i}});var t=s(1151),p=s(7294);function e(n){const a=Object.assign({h1:"h1",p:"p",span:"span"},(0,t.ah)(),n.components);return p.createElement(p.Fragment,null,p.createElement(a.h1,null,"forwardRef useImperativeHandle"),"\n",p.createElement(a.p,null,"一般要使用html的tag是直接用useRef即可,如以下程式碼"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token keyword">default</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span>\r\n    <span class="token keyword">const</span> btn <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>\r\n    <span class="token keyword">return</span><span class="token punctuation">(</span>\r\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>btn<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Button</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>\r\n<span class="token punctuation">}</span>\r\n</code></pre></div>'}}),"\n",p.createElement(a.p,null,"但通常會自己包一些component,例如以下"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre style="counter-reset: linenumber 0" class="language-tsx line-numbers"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">ChildWindow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span>\r\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n            ChildWindow\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\r\n    <span class="token punctuation">)</span>\r\n<span class="token punctuation">}</span>\r\n</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>'}}),"\n",p.createElement(a.p,null,"如果要對ChildWindow使用useRef,則必須要把ChildWindow改成下面這樣"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">const</span> ChildWindow <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span>\r\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n            ChildWindow\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\r\n    <span class="token punctuation">)</span>\r\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"加上了forwardRef外部才能使用"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token keyword">default</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span>\r\n    <span class="token keyword">const</span> cw <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>\r\n    <span class="token keyword">return</span><span class="token punctuation">(</span>\r\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildWindow</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>cw<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Button</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildWindow</span></span><span class="token punctuation">></span></span><span class="token plain-text">\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>\r\n<span class="token punctuation">}</span>\r\n</code></pre></div>'}}))}var o=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.ah)(),n.components);return a?p.createElement(a,n,p.createElement(e,n)):e(n)},c=s(4842),l=s(4001);const u=n=>{let{data:a,children:s}=n;return console.log(s),p.createElement(c.Z,null,p.createElement("article",{className:"prose prose-lg"},s))},r=n=>{let{data:a}=n;return p.createElement(l.Z,{title:a.mdx.frontmatter.title})};function i(n){return p.createElement(u,n,p.createElement(o,n))}},1151:function(n,a,s){s.d(a,{ah:function(){return e}});var t=s(7294);const p=t.createContext({});function e(n){const a=t.useContext(p);return t.useMemo((()=>"function"==typeof n?n(a):{...a,...n}),[a,n])}}}]);
//# sourceMappingURL=component---src-pages-mdx-frontmatter-slug-tsx-content-file-path-src-blog-forward-ref和use-imperative-handle-mdx-e1151618a9a7aa5912ba.js.map